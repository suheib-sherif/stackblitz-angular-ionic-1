<ion-modal
  #modal
  (didPresent)="onModalPresented()"
  [canDismiss]="true"
  cssClass="rounded-sheet inset-sheet bottom-stick">
  <ng-template>
    <div class="flex items-start justify-center p-4">
      <div class="relative bg-white rounded-3xl p-4 w-full">
        <div class="mb-2 pt-2">
          <h2 class="text-2xl font-bold text-gray-900">
            {{ stockSymbol }} {{ stockPrice | currency }}
          </h2>
        </div>

        <div class="space-y-2 mb-2 pb-8">
          <div class="bg-white border-2 rounded-md p-2">
            <label class="block text-xs text-gray-500">Price</label>
            <div class="text-base text-gray-900">{{ priceType }}</div>
          </div>

          <div class="bg-white border-2 rounded-md p-2">
            <label class="block text-xs text-gray-500">Amount</label>
            <input type="number" [(ngModel)]="amount" (input)="computeShares(stockPrice, amount)"
              class="w-full bg-transparent text-base text-gray-900 border-none outline-none p-0"
              placeholder="0.0">
          </div>

          <div class="bg-white border-2 rounded-md p-2">
            <label class="block text-xs text-gray-500">Shares</label>
            <div class="text-base text-gray-900">{{buyingShares}}</div>
          </div>
        </div>
        <div class="relative">
          <div class="bg-gray-900 rounded-full h-16 flex items-center justify-center relative overflow-hidden"
               #swipeContainer>
            <span class="text-white font-medium text-lg z-10">Swipe to buy</span>

            <div class="absolute left-2 w-12 h-12 bg-white rounded-full flex items-center justify-center
                        cursor-pointer transition-transform duration-200 z-20"
                 #swipeButton
                 [style.transform]="'translateX(' + swipeProgress + 'px)'">
              <svg class="w-6 h-6 text-gray-900" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </div>

            <div class="absolute left-0 top-0 h-full bg-black rounded-full transition-all duration-200"
                 [style.width]="swipePercentage + '%'"></div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
</ion-modal>

